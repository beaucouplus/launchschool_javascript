<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>1000 lights</title>
  <script>

  function lightsOn(switches) {
    // ...All the lights are initially turned off.
    // For the nth round, every switch that is a multiple of n gets toggled.
    // For example, in the first round, all the switches get toggled because
    // all integers are multiples of 1.
    // In the second round, only the switches that are multiples of 2 get toggled.
    // The number of switches dictates the number of rounds.
    // For instance, if there are 10 switches then there will be 10 rounds of toggling.
    // Return an array containing the switch numbers of the lights
    // that are on after all the rounds have been completed. }lightsOn(5); // [1, 4]
    var lights = [];
    var multiples;

    for (var i = 0; i < switches; i++) {
      lights.push(false);
    }

    // chaque tour, on boucle et on toggle uniquement les multiples du nombre
    // on le fait Ã  partir de 1

    lights.forEach(function(item, index) {
      multiples = [];
      for (var j = 1; j <= switches; j++) {
        if (j % (index + 1) === 0) {
          multiples.push(j);
        }
      }
      multiples.forEach(function(multiple) {
        lights[multiple - 1] = lights[multiple - 1] ? false : multiple;
      })
    });

    return lights.filter(function(item) {
      if (item) return item;
    })
  }
  console.log(lightsOn(5)); // [1, 4]
  console.log(lightsOn(9));
  console.log(lightsOn(23));

  // Detailed result of each round for `5` lights
  // Round 1: all lights are on
  // Round 2: lights 2 and 4 are now off;     1, 3, and 5 are on
  // Round 3: lights 2, 3, and 4 are now off; 1 and 5 are on
  // Round 4: lights 2 and 3 are now off;     1, 4, and 5 are on
  // Round 5: lights 2, 3, and 5 are now off; 1 and 4 are on

  console.log(lightsOn(100)); // [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
  </script>
</head>

<body>
  <h1>1000 lights</h1>
</body>

</html>